<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="wc.dao.ITbCrmMessageDao">
  <resultMap id="BaseResultMap" type="wc.entity.TbCrmMessage">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="ID" jdbcType="DECIMAL" property="id" />
    <result column="TO_USER_ID" jdbcType="DECIMAL" property="toUserId" />
    <result column="FROM_USER_ID" jdbcType="DECIMAL" property="fromUserId" />
    <result column="READ_TIME" jdbcType="TIMESTAMP" property="readTime" />
    <result column="SEND_TIME" jdbcType="TIMESTAMP" property="sendTime" />
    <result column="STATUS" jdbcType="DECIMAL" property="status" />
    <result column="CONTENT" jdbcType="CLOB" property="content" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from TB_CRM_MESSAGE
    where ID = #{id,jdbcType=DECIMAL}
  </delete>
  <insert id="insert" parameterType="wc.entity.TbCrmMessage">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into TB_CRM_MESSAGE (ID, TO_USER_ID, FROM_USER_ID, READ_TIME, SEND_TIME, STATUS, CONTENT) values (seq_crm_message.nextval, #{toUserId}, #{fromUserId}, 
      to_date(#{readTime},'yyyy-MM-dd HH24-mi-ss'), to_date(#{sendTime},'yyyy-MM-dd HH24-mi-ss'), #{status},#{content})
  </insert>
  <update id="updateByPrimaryKey" parameterType="wc.entity.TbCrmMessage">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update TB_CRM_MESSAGE
    set TO_USER_ID = #{toUserId},
      FROM_USER_ID = #{fromUserId},
      READ_TIME = to_date(#{readTime},'yyyy-MM-dd HH24-mi-ss'),
      SEND_TIME = to_date(#{sendTime},'yyyy-MM-dd HH24-mi-ss'),
      STATUS = #{status},
      CONTENT = #{content}
    where ID = #{id}
  </update>
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select ID, TO_USER_ID, FROM_USER_ID, READ_TIME, SEND_TIME, STATUS, CONTENT
    from TB_CRM_MESSAGE
    where ID = #{id,jdbcType=DECIMAL}
  </select>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select ID, TO_USER_ID, FROM_USER_ID, READ_TIME, SEND_TIME, STATUS, CONTENT
    from TB_CRM_MESSAGE
  </select>
  <!-- 查询自己写给别人的信 -->
  <select id="selectBymyself" resultMap="BaseResultMap">
  select * from (select a.*,rownum rn from TB_CRM_MESSAGE a where FROM_USER_ID=#{userId} and rownum &lt;= #{page}*#{pagesize}) aa where aa.rn > (#{page}-1)*#{pagesize}
    <!-- select * from TB_CRM_MESSAGE where FROM_USER_ID=#{userId} -->
  </select>
  <select id="findBmTotal" resultType="int" parameterType="Integer">
		select count(*) from TB_CRM_MESSAGE where FROM_USER_ID=#{userId}
  </select>
  <!-- 查询别人写给自己的信 -->
  <select id="selectByother" resultMap="BaseResultMap">
   select * from (select a.*,rownum rn from TB_CRM_MESSAGE a where TO_USER_ID=#{userId} and rownum &lt;= #{page}*#{pagesize}) aa where aa.rn > (#{page}-1)*#{pagesize}
    <!-- select * from TB_CRM_MESSAGE where TO_USER_ID=#{userId} -->
  </select>
  <select id="findBoTotal" resultType="int" parameterType="Integer">
		select count(*) from TB_CRM_MESSAGE where TO_USER_ID=#{userId}
  </select>
  <!-- 查看  -->
  <select id="selectByid" parameterType="Integer" resultMap="BaseResultMap">
    select * from TB_CRM_MESSAGE where ID = #{id}
  </select>
   <!-- 删除  -->
   <delete id="deleteById" parameterType="Integer">
    delete from TB_CRM_MESSAGE where ID = #{id}
  </delete>
</mapper>